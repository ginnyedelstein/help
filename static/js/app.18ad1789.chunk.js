(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{317:function(e,t,n){e.exports=n(506)},506:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(95),s=n.n(i),o=n(12),c=n.n(o),l=n(2),u=n(7),d=n(4),f=n(20),b=n(103),h=n(59),p=n(525),j=n(523),g=n(524),x=n(44),m=n(5),O=n.n(m),w=n(43),A=n(21),y=n(53),v=n(36),E=(n(507),n(307)),C=n(109),T="#BACDB0",B="#729B79",I=n(17),S=n.n(I),P=n(18),U=n.n(P),R=function(){function e(){S()(this,e)}return U()(e,null,[{key:"apiUrl",get:function(){return"https://cnadhru17e.execute-api.us-east-1.amazonaws.com"}},{key:"webSocketUrl",get:function(){return"wss://1zimbyfih9.execute-api.us-east-1.amazonaws.com/development"}}]),e}(),q=n(1),Q=h.object().shape({title:h.string().label("GetHelp").required("Enter a valid request").min(3,"Min length: 3 chars").max(50,"Max length: 50 chars"),description:h.string().label("GetHelp").required("Enter a valid request").min(10,"Min length: 10 chars").max(350,"Max length: 350 chars")}),H=function(e){var t=e.errorValue;return Object(q.jsx)(l.default,{style:F.errorContainer,children:Object(q.jsx)(u.default,{style:F.errorText,children:t})})};function V(e){var t=e.user,n=Object(r.useState)("general"),a=c()(n,2),i=a[0],s=a[1],o=Object(r.useState)("5"),d=c()(o,2),f=d[0],h=(d[1],Object(r.useState)(!0)),p=c()(h,2),j=p[0],g=p[1],x=Object(r.useState)(null),m=c()(x,2),B=m[0],I=m[1],S=Object(r.useState)(null),P=c()(S,2),U=P[0],V=P[1];Object(r.useEffect)((function(){!function(){var e,t;O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.awrap(C.requestForegroundPermissionsAsync());case 2:if(e=n.sent,"granted"===e.status){n.next=7;break}return V("Permission to access location was denied"),n.abrupt("return");case 7:return n.next=9,O.a.awrap(C.getCurrentPositionAsync({}));case 9:t=n.sent,I(t);case 11:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]);var D="Waiting..";U?D=U:B&&(D=JSON.stringify(B));return console.log(D),Object(q.jsx)(w.default,{children:Object(q.jsxs)(l.default,{style:F.container,children:[Object(q.jsxs)(l.default,{style:F.button2Wrapper,children:[Object(q.jsx)(y.default,{activeOpacity:1,onHideUnderlay:function(){return g(!0)},onShowUnderlay:function(){return g(!1)},underlayColor:T,onPress:function(){return g(!1)},style:j?F.button2ContainerActive:F.button2Container,children:Object(q.jsx)(u.default,{style:F.buttonText,children:"Get Help"})}),Object(q.jsx)(y.default,{activeOpacity:1,onHideUnderlay:function(){return g(!1)},onShowUnderlay:function(){return g(!0)},underlayColor:T,onPress:function(){return g(!0)},style:j?F.button2Container:F.button2ContainerActive,children:Object(q.jsx)(u.default,{style:F.buttonText,children:"Give Help"})})]}),j?Object(q.jsx)(u.default,{children:"get help"}):Object(q.jsx)(u.default,{children:"give help"}),Object(q.jsx)(b.Formik,{initialValues:{title:"",description:"",category:i,distance:f},onSubmit:function(e,n){!function(e){var n,r,a,i,s,o;O.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.title,r=e.description,a=e.category,e.distance,c.prev=1,c.next=4,O.a.awrap(fetch(R.apiUrl+"/requests",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userId:t,request:n,description:r,give:j,category:a,location:B.coords.latitude+", "+B.coords.longitude,photoS3Url:""})}));case 4:return i=c.sent,c.next=7,O.a.awrap(i.json());case 7:if(s=c.sent,200!==i.status){c.next=14;break}return o=JSON.stringify(s),alert(o),c.abrupt("return",o);case 14:alert(i.message);case 15:c.next=20;break;case 17:c.prev=17,c.t0=c.catch(1),alert(c.t0);case 20:case"end":return c.stop()}}),null,null,[[1,17]],Promise)}(e)},validationSchema:Q,children:function(e){var t=e.handleChange,n=e.values,r=e.errors,a=e.touched,o=e.handleSubmit,c=e.handleBlur;return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(v.default,{style:F.input,numberOfLines:2,value:n.title,placeholder:"Enter post title",onChangeText:t("title"),autoCapitalize:"none",onBlur:c("title")}),Object(q.jsx)(H,{errorValue:a.title&&r.title}),Object(q.jsx)(v.default,{style:F.largeInput,multiline:!0,numberOfLines:1,value:n.description,placeholder:"Enter description",onChangeText:t("description"),autoCapitalize:"none",onBlur:c("description")}),Object(q.jsx)(H,{errorValue:a.description&&r.description}),Object(q.jsx)(u.default,{children:"select category"}),Object(q.jsx)(E.default,{onValueChange:function(e){s(e),console.log(i)},selectedValue:n.category,items:[{label:"General",value:"general"},{label:"Athletics",value:"athletics"},{label:"Children",value:"children"}]}),Object(q.jsx)(A.default,{onPress:o,style:F.buttonContainer,children:Object(q.jsx)(u.default,{style:F.buttonText,children:"Submit"})})]})}})]})})}var F=d.default.create({errorContainer:{marginVertical:3},errorText:{color:"red"},container:{flex:1,alignItems:"center",marginTop:40},input:{marginVertical:10,width:f.default.get("window").width-100,height:40,borderWidth:1,padding:10,borderRadius:5},largeInput:{marginVertical:10,width:f.default.get("window").width-100,height:80,borderWidth:1,padding:10,borderRadius:5},buttonContainer:{marginVertical:10,justifyContent:"center",alignItems:"center",padding:10,width:f.default.get("window").width-200,height:44,borderRadius:5,backgroundColor:"#343434"},button2Container:{margin:10,justifyContent:"center",alignItems:"center",padding:10,width:f.default.get("window").width/3,height:44,borderRadius:5,backgroundColor:B,flexDirection:"row"},button2ContainerActive:{margin:10,justifyContent:"center",alignItems:"center",padding:10,width:f.default.get("window").width/3,height:44,borderRadius:5,backgroundColor:"#417F4C",flexDirection:"row"},button2Wrapper:{marginVertical:10,justifyContent:"center",alignItems:"center",padding:10,width:f.default.get("window").width/3,height:44,borderRadius:5,flexDirection:"row"},buttonText:{fontSize:18,color:"#ffffff"},picker:{marginVertical:5,width:f.default.get("window").width-100,padding:0,borderWidth:1,borderRadius:5}}),D=n(261),N=(n(442),h.object().shape({email:h.string().label("Email").email("Enter a valid email").required("Please enter a registered email"),password:h.string().label("Password").required().min(8,"Password must have at least 8 characters ").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/,"Password must include uppercase, lowercase, number and special characters")})),z=function(e){var t=e.errorValue;return Object(q.jsx)(l.default,{style:K.errorContainer,children:Object(q.jsx)(u.default,{style:K.errorText,children:t})})};function k(e){var t=e.setUser,n=e.setIsNotSignedIn,a=Object(r.useState)(!0),i=c()(a,2),s=i[0],o=i[1];function d(e){!function(e,r){var a,i,s;O.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,O.a.awrap(fetch(R.apiUrl+"/sign-in",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}));case 3:return a=o.sent,o.next=6,O.a.awrap(a.json());case 6:if(i=o.sent,200!==a.status){o.next=14;break}return s=Object(D.default)(i.idToken).sub,t(s),n(!1),o.abrupt("return",s);case 14:alert(a.message);case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),alert(o.t0);case 20:case"end":return o.stop()}}),null,null,[[0,17]],Promise)}(e.email,e.password)}function f(e){!function(e,t,n,r,a,i,s){var o,c,l;O.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,O.a.awrap(fetch(R.apiUrl+"/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,firstName:t,lastName:n,gender:r,address:a,birthdate:i,password:s})}));case 3:return o=u.sent,u.next=6,O.a.awrap(o.json());case 6:if(c=u.sent,200!==o.status){u.next=12;break}return l=JSON.stringify(c),u.abrupt("return",l);case 12:alert(c.body);case 13:u.next=18;break;case 15:u.prev=15,u.t0=u.catch(0),alert(u.t0);case 18:case"end":return u.stop()}}),null,null,[[0,15]],Promise)}(e.email,e.firstName,e.lastName,e.gender,e.address,e.birthdate,e.password)}return Object(q.jsxs)(l.default,{style:K.container,children:[Object(q.jsxs)(l.default,{style:K.button2Wrapper,children:[Object(q.jsx)(y.default,{activeOpacity:1,onHideUnderlay:function(){return o(!0)},onShowUnderlay:function(){return o(!1)},underlayColor:T,onPress:function(){return o(!1)},style:s?K.button2ContainerActive:K.button2Container,children:Object(q.jsx)(u.default,{style:K.buttonText,children:"Login"})}),Object(q.jsx)(y.default,{activeOpacity:1,onHideUnderlay:function(){return o(!1)},onShowUnderlay:function(){return o(!0)},underlayColor:T,onPress:function(){return o(!0)},style:s?K.button2Container:K.button2ContainerActive,children:Object(q.jsx)(u.default,{style:K.buttonText,children:"Sign Up"})})]}),s?Object(q.jsx)(b.Formik,{initialValues:{email:"",password:""},onSubmit:function(e,t){d(e)},validationSchema:N,children:function(e){var t=e.handleChange,n=e.values,r=e.errors,a=e.touched,i=e.handleSubmit,s=e.handleBlur;return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(v.default,{style:K.input,numberOfLines:1,value:n.email,placeholder:"Enter email",onChangeText:t("email"),autoCapitalize:"none",autoCompleteType:"email",keyboardType:"email-address",onBlur:s("email")}),Object(q.jsx)(z,{errorValue:a.email&&r.email}),Object(q.jsx)(v.default,{style:K.input,numberOfLines:1,value:n.password,placeholder:"Enter password",onChangeText:t("password"),autoCapitalize:"none",onBlur:s("password"),secureTextEntry:!0}),Object(q.jsx)(z,{errorValue:a.password&&r.password}),Object(q.jsx)(A.default,{onPress:i,style:K.buttonContainer,children:Object(q.jsx)(u.default,{style:K.buttonText,children:"Login"})})]})}}):Object(q.jsx)(b.Formik,{initialValues:{email:"",firstName:"",lastName:"",gender:"",address:"",birthdate:"",password:""},onSubmit:function(e,t){f(e)},validationSchema:N,children:function(e){var t=e.handleChange,n=e.values,r=e.errors,a=e.touched,i=e.handleSubmit,s=e.handleBlur;return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(v.default,{style:K.input,numberOfLines:1,value:n.email,placeholder:"Enter email",onChangeText:t("email"),autoCapitalize:"none",autoCompleteType:"email",keyboardType:"email-address",onBlur:s("email")}),Object(q.jsx)(z,{errorValue:a.email&&r.email}),Object(q.jsx)(v.default,{style:K.input,numberOfLines:1,value:n.password,placeholder:"Enter password",onChangeText:t("password"),autoCapitalize:"none",onBlur:s("password"),secureTextEntry:!0}),Object(q.jsx)(z,{errorValue:a.password&&r.password}),Object(q.jsx)(v.default,{style:K.input,numberOfLines:1,value:n.firstName,placeholder:"Enter first name",onChangeText:t("firstName"),autoCapitalize:"none",onBlur:s("firstName")}),Object(q.jsx)(v.default,{style:K.input,numberOfLines:1,value:n.lastName,placeholder:"Enter last name",onChangeText:t("lastName"),autoCapitalize:"none",onBlur:s("lastName")}),Object(q.jsx)(v.default,{style:K.input,numberOfLines:1,value:n.gender,placeholder:"Enter gender",onChangeText:t("gender"),autoCapitalize:"none",onBlur:s("gender")}),Object(q.jsx)(v.default,{style:K.input,numberOfLines:1,value:n.address,placeholder:"Enter address",onChangeText:t("address"),autoCapitalize:"none",onBlur:s("address")}),Object(q.jsx)(v.default,{style:K.input,numberOfLines:1,value:n.birthdate,placeholder:"Enter birthday",onChangeText:t("birthdate"),autoCapitalize:"none",onBlur:s("birthdate")}),Object(q.jsx)(A.default,{onPress:i,style:K.buttonContainer,children:Object(q.jsx)(u.default,{style:K.buttonText,children:"Sign Up"})})]})}})]})}var K=d.default.create({errorContainer:{marginVertical:5},errorText:{color:"red"},container:{flex:1,alignItems:"center",marginTop:40},input:{marginVertical:10,width:f.default.get("window").width-100,height:40,borderWidth:1,padding:10,borderRadius:5},buttonContainer:{marginVertical:10,justifyContent:"center",alignItems:"center",padding:10,width:f.default.get("window").width-200,height:44,borderRadius:5,backgroundColor:"#343434"},button2Container:{margin:10,justifyContent:"center",alignItems:"center",padding:10,width:f.default.get("window").width/3,height:44,borderRadius:5,backgroundColor:B,flexDirection:"row"},button2ContainerActive:{margin:10,justifyContent:"center",alignItems:"center",padding:10,width:f.default.get("window").width/3,height:44,borderRadius:5,backgroundColor:"#417F4C",flexDirection:"row"},button2Wrapper:{marginVertical:10,justifyContent:"center",alignItems:"center",padding:10,width:f.default.get("window").width/3,height:44,borderRadius:5,flexDirection:"row"},buttonText:{fontSize:18,color:"#ffffff"}}),Z=function(e){var t=e.user,n=Object(r.useState)({}),a=c()(n,2),i=a[0],s=a[1];t.replace(/"/g,""),R.apiUrl;return Object(r.useLayoutEffect)((function(){!function(){var e,t,n;O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O.a.awrap(fetch(R.apiUrl+"/users/83a6b4bd-9975-42ba-987d-e12d031a80b0",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}));case 3:return e=r.sent,r.next=6,O.a.awrap(e.json());case 6:t=r.sent,200===e.status?(n=t.body,s(n)):alert("not 200",e.status),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),alert("caught",r.t0);case 13:case"end":return r.stop()}}),null,null,[[0,10]],Promise)}()}),[]),console.log(i),Object(q.jsxs)(l.default,{style:Y.container,children:[Object(q.jsxs)(u.default,{children:["CURRENT USER: ",t]}),Object(q.jsx)(u.default,{}),Object(q.jsx)(u.default,{}),Object(q.jsx)(u.default,{}),Object(q.jsx)(x.default,{name:"account-circle",color:"grey",size:100}),i[0]?Object(q.jsx)(u.default,{children:i[0].firstName}):Object(q.jsx)(u.default,{}),Object(q.jsxs)(l.default,{style:{flexDirection:"row"},children:[Object(q.jsx)(x.default,{name:"star",color:"grey",size:30}),Object(q.jsx)(x.default,{name:"star",color:"grey",size:30}),Object(q.jsx)(x.default,{name:"star",color:"grey",size:30})]}),Object(q.jsx)(u.default,{}),Object(q.jsxs)(u.default,{children:[i[0]?i[0].helpsGiven:"0"," helps given"]}),Object(q.jsxs)(u.default,{children:[i[0]?i[0].helpsReceived:"0"," helps received"]}),Object(q.jsx)(u.default,{}),Object(q.jsx)(u.default,{children:i[0]?i[0].gender:""}),Object(q.jsx)(u.default,{children:i[0]?i[0].address:""}),Object(q.jsx)(u.default,{children:i[0]?i[0].birthdate:""})]})},Y=d.default.create({container:{flex:1,alignItems:"center",marginTop:40}}),L=n(32),W=n(164),M=n(54),J=n(277),G=n(176),X=n(180),_=n(27),$=(n(508),n(275)),ee=function(e){var t=e.user,n=Object(r.useState)(!1),i=c()(n,2),s=i[0],o=i[1],d=Object(r.useState)([]),b=c()(d,2),h=b[0],p=b[1],j=Object(r.useState)([{label:"General",value:"general"},{label:"Athletics",value:"athletics"},{label:"Children",value:"children"},{label:"Clothing",value:"clothing"},{label:"Entertainment",value:"entertainment"},{label:"Home",value:"home"},{label:"Kitchen",value:"kitchen"},{label:"Pet",value:"pet"},{label:"Technology",value:"technology"}]),g=c()(j,2),m=g[0],w=g[1],y=Object(r.useState)(!1),v=c()(y,2),E=v[0],T=v[1],I=Object(r.useState)([]),S=c()(I,2),P=S[0],U=S[1],Q=Object(r.useState)([{label:"5km",value:"5"},{label:"15km",value:"15"},{label:"unlimited",value:"0"}]),H=c()(Q,2),V=H[0],F=H[1],D=Object(r.useState)([]),N=c()(D,2),z=N[0],k=N[1],K=Object(r.useState)([]),Z=c()(K,2),Y=Z[0],ee=Z[1],ne=a.a.useState(!1),re=c()(ne,2),ae=re[0],ie=re[1],se=Object(r.useState)({}),oe=c()(se,2),ce=oe[0],le=oe[1],ue=Object(r.useState)(null),de=c()(ue,2),fe=de[0],be=de[1],he=Object(_.useNavigation)(),pe=function(){var e,t,n;return O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O.a.awrap(fetch(R.apiUrl+"/requests",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}));case 3:return e=r.sent,r.next=6,O.a.awrap(e.json());case 6:t=r.sent,200===e.status?([],n=t.body,k(n),ee(z)):alert(t.message),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),alert(r.t0);case 13:case"end":return r.stop()}}),null,null,[[0,10]],Promise)},je=a.a.useCallback((function(){var e;ie(!0),(e=2e3,new Promise((function(t){return setTimeout(t,e)}))).then((function(){pe(),ie(!1)}))}),[]),ge=function(e){return J.default.alert("Accept","Please confirm that you would like to accept this request",[{text:"Cancel",onPress:function(){return console.log("Cancel Pressed")},style:"cancel"},{text:"OK",onPress:function(){return function(e){var n,r,a;return O.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return alert(e),alert(t),i.prev=2,i.next=5,O.a.awrap(fetch(R.apiUrl+"/requests/"+e,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({acceptedUserId:t})}));case 5:return n=i.sent,i.next=8,O.a.awrap(n.json());case 8:if(r=i.sent,200!==n.status){i.next=15;break}return a=JSON.stringify(r),alert(a),i.abrupt("return",a);case 15:alert(r.message);case 16:i.next=21;break;case 18:i.prev=18,i.t0=i.catch(2),alert(i.t0);case 21:case"end":return i.stop()}}),null,null,[[2,18]],Promise)}(e)}}])},xe=Object(r.useCallback)((function(){T(!1)}),[]),me=Object(r.useCallback)((function(){o(!1)}),[]);X.default.setMode("BADGE"),Object(r.useEffect)((function(){pe()}),[]),Object(r.useEffect)((function(){!function(){var e,t;O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.awrap(C.requestForegroundPermissionsAsync());case 2:if(e=n.sent,"granted"===e.status){n.next=7;break}return be("Permission to access location was denied"),n.abrupt("return");case 7:return n.next=9,O.a.awrap(C.getCurrentPositionAsync({}));case 9:t=n.sent,le(t);case 11:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]);return fe?fe:ce&&JSON.stringify(ce),Object(q.jsxs)(G.default,{style:te.container,children:[Object(q.jsxs)(l.default,{style:te.filersContainer,children:[Object(q.jsx)(X.default,{multiple:!0,open:s,value:h,items:m,setOpen:o,setValue:p,setItems:w,showBadgeDot:!1,style:{display:"flex",flexDirection:"row",margin:5,backgroundColor:B,borderColor:B,width:f.default.get("window").width/3},onChangeValue:function(e){console.log(h),h.length?ee(z.filter((function(e){return h.includes(e.category)}))):ee(z)},onOpen:xe,placeholder:"Category"}),Object(q.jsx)(X.default,{multiple:!1,open:E,value:P,items:V,setOpen:T,setValue:U,setItems:F,showBadgeDot:!1,style:{display:"flex",flexDirection:"row",margin:5,backgroundColor:B,borderColor:B,width:f.default.get("window").width/3},onChangeValue:function(e){alert(e),console.log(P);ee(z.filter((function(e){return"ELECTRONICS"===e.category})))},onOpen:me,placeholder:"Radius"})]}),Object(q.jsxs)(u.default,{children:["CURRENT USER: ",t]}),Object(q.jsx)(M.default,{refreshControl:Object(q.jsx)(W.default,{refreshing:ae,onRefresh:je}),data:Y,renderItem:function(e){var n=e.item,r=e.index;return Object(q.jsxs)(l.default,{style:te.card,children:[Object(q.jsxs)(l.default,{style:te.header,children:[Object(q.jsxs)(u.default,{style:te.request,children:[n.request," "]}),Object(q.jsxs)(u.default,{style:te.distance,children:[Object($.getDistance)({latitude:ce.coords?ce.coords.latitude:0,longitude:ce.coords?ce.coords.longitude:0},{latitude:n.location?parseInt(n.location.split(", ")[0]):0,longitude:n.location?parseInt(n.location.split(", ")[1]):0},100)/1e3,"km"]})]}),Object(q.jsxs)(u.default,{style:te.description,children:[n.description," "]}),Object(q.jsx)(l.default,{style:te.imgContainer,children:1===r?Object(q.jsx)(L.default,{style:te.img,source:{uri:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBYWFRYWFhYZGRgYHBwcGhwcGh4aHB4fGhwZGhoaGhocIS4lHh4rHxwYJjgmKy8xNzU1GiU7QDs0Py40NTEBDAwMDw8PEQ8PED8dGB00MTQxNDE0MTQxMTExMTQxNDE0NDExMTExMTExMTExMTExMTExMTExMTExMTExMTExMf/AABEIANQA7gMBIgACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAABgIDBAUHAQj/xAA/EAACAQIDBQYDBAkDBQEAAAABAgADEQQSIQUGMUFRBxMiYXGBMkKRUnKh8BQjYoKSscHR4TOiwiRTY7LxQ//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAMAwEAAhEDEQA/AOzREQEREBERAREQEREBERAREgu/m/K4P9TRCviCLm+q0weDOBxY8QvudLXCW4/adGgoatVSmDoC7BbnoLnU+kge3+05aZtQpgjUK9TMM3nTpL4mXzJWc42himQ99iGNbE1BdA5vlXk7jgqfZQWB6ATUUdWNSoSxJ4n4nPHKv2Rb2AgdL2b2i418xNOjkX4ncGmq9CzZyB6cTKau9GIqXPf1nA49yi4emvo7gv8AUiQ6lUQKtXEkBBfu6SnKpPUfZXq58R5dBj43HtXIAdwg+FETKg+6L3PqZUTWlv1Uw9i71cvC7FKy/vaK4/ik42fvvhWpd5Uqon71w33BbMT1W1x6WJ4dQw2VWDuxB1KAZjbTiOCjhqZk4baARqQVBTRyB3oCs/iFxYkWXjfQciIV1vF7+ixalQbJyqV3XDofMBruf4Zrau+uJPw2I/8AFhK9UfxsVUy3u9u47WdjZiPj+Jz++1zb0ktpbuUz8Zdj5sZBDKu++KX5avvg2/kr3lNLtQdCBVVD95KlA/7swk5bdfDH5D/EZFt58Js7D+CrWdXIvkUF2seZUDQceNr2gZ+D7R8M1s6ul/mFqifVTm/2yR7N25hsR/o10c/ZDDMPVT4h7icvwm6OGxILYPE03Yalbd3UH3lFj7ma3aW6eJom9Sj3ig3zDRh5iomo+hlHdYnENnb14nD2FPEMwHGlivEPRaw1HkCRJvsLtEw9Vlp4hThqh4ZyDTY6DwVOHHraQTiJ4DPYCIiAiIgIiICIiAiIgeRPZgbW2lTw1F61VsqILnqeigc2JsAOZMDS79b0rgaGYWatUutJDzI4uw+wtwT6gc5xOnWyA4mue8qVGJpq2pqPfxO/7Cn+gHCU7d2+2KxDYiuCSdEpg/CgPhQHkObNzJPlNfUpvUY1KpFzYADRQo4Io+yPL6yjGaq1R2d2LFjmduJdug8hwAEyURiQxHLQclF+H14nmZn7KwYqlshVERS1Sq18iKOZA+I8gL6maPGYwu5WmzZb2UkWYjqQOHp+MI2ThS93OdzwHS3IdB6TDxG0nKeDwLrfqLEDj7zZUNnfo1EVX/1KgIpr8xvoXPQecwMThxSoOp1d2VB6JZ6h/iKL7N0gW9hVWFW9ydNSdeOgv5E2BHnJft7BU12YrKNTiqa0xzAZGqZfZWtIns+mSBTQFndlzEa8PgRfO5uT6DrJViWNWumHUjucIwLH5Wq5Upj1AKAD96B2rdVf+koX45B/Wbia3ZlZBTRENwqqq+YAAEhO+u/eTNQwjAvqr1RqEPNU5FurcB5nhFbHfPfVcPehQs+I+Y8VpXHFurW1C+55X5O7szMzMzMxzMzG7E8yx5/4Etonrqbk3uTc3JJOpN9b85WIFPc+IMpKsuoZSQwPkRqD6SVbH7QcVhwFr2xFMDUsQrgdc/Bv3h7yL1KgC5mIAA1J0A8/WW0TOQzrZflU8SeTOP5Ly4nyDqeFx2y9qCwslVhorju3N/s30cfdJkc3i7OalME0jnTpa4HqvL1EitXDq2hA/wDk3ext7cZhbBanf0wPgq+KwH2anxD3JHlAp3O30rYCoMPicz4e4Fjq1IHgyHiyfs/SxFj2+nWVlDKQVYAgjUEEXBHlOF747Qw+N7qrSQ0q6se8psL3QglmUr8dmC6WB14TonZbtIVMJ3d7mixXzykkqbdL51/cI5SibRESBERAREQEREBKSwEhvaZvO+BwwNKwq1WyIxFwgsSz2OhIA0B0uedrTgWLrtVYvUdqjsdWZizH1Y6n0tb05B9P7R23h6C5q1emg/acAnyAvcnyE4n2g73tj6ipRuMMhGS/hLubjOwPkfCp5G5+KwhNGiNdAPYdDfXlK1qEG9zxFuh6gfjr6QNjQw2VhTRO8rtbwr4gCeAYj4j5DSbGns9nc0KbB6hB/SKt/BTT5qaNwy/bYcfhHO+FgdoFV7tWSktRrPVAOYK3FA17gGxuQATe15tsViqFOn3C6UxbMtwrVCOBrOOC9EW9uesqNfji1cDB4IE4dDmepw71hpnc8Ao4Kp4ceMy9mYWhhmCUk/S8T0AzU0PU/at7CXcKr11CpSqOg4JTHc0B96o2reth6y5iKQUd3UxNDDof/wAqF3c+TFdXPkTbygazamM7t2d3FbFNp4fElL34FhyA0E1eC2XXxLgKpYgWAGoUXubn1JJJ5kyV4bZ9FACmGqOPt1yKCfw/FaU4vaaZcj1QV/7OGXu09HqcWgU4DBrQulFlfE2Iepcd1h1+Zs3AvYm3SX9gbO791p0b/o9I5nc6Go/N2J+UC9r9SecvbN2LWxKXcLhsInib5UsPmcnVj5mW9r7YRk/RsMCmHGjHg9Ujm/2U5hefPoCthvBvSSpoYZyE+F6oNi45rTPEJ1bieWnGJogAFtLC2nKXAJ435/oZB6P6f3nlSoFBYmw/vwAHMnhaUVagUepsANSx5KBzMqw2HOYO9sw+EcQl+Pqx5sfQQKKeGLHO4tY3VCdFt8zfaf8AATOK/m/Xj+fKBpx0/Omh9fxnp/x/i0C3flx9v5zM2dgHr1BSpjM59lUc2Y8lGg99NSJXsnZz4lxTpjzdjoqLfV2PIcfM6y5trbVNKbYXBk92f9at89Y8CFI1FPj6jTgTmCnbe0qNFDhsLZzf9dibauw+SkeSA8/p9ozHsk2VUWnUxLnw1AEpjmVRmLO3UljlHknnOTGwHlPojc/C91gsKnSkhPqyhj+JMo3UREgREQETX7W2tRw9M1K9RUQc2PE9FHFj5DWct292oVqpKYNO7Th3jANUPmq6qvqc3tA6xjMdTormq1ERerMFH1JkI292lUUuuFUVm5uxKUh6G13PkBbznHMdjczF61R6tTXVmLkeWZjoPKYv6exNkUfTNb3OggSzbu362NyrXPeqrZlREVEVrEXDEFzoTxJkWxmBCZnLqp5IpufTT/E8YORepU06E2H04fhLbVKCWupc8hwH1P8AQQixTe45A6eXlcch+fYeN+F9OPW+pvr11/JtV6uZswVV6KOHvfjK72sRzHHmOVv8wrIo1QCeWmW40HEH6W5a6ySbDdAhZEpK6/HWrHMq31ASn8xtbXykSR+dtALdeP8A9kz3E3bGNd1clVphbga+w8+vrAoxm1KbmzNWxbcszGnS9BTTiPWZOzsLjqmmHoLRU/YphD/GRedY2VulhqIGSmLjmRczf0sOALAW9IHJcH2bYir4sRVPuSx/HSSRN1sBs+ka9c3CW1bW5PBUXmxOgEnoQThm+eOxG08S4w9zQw4bJrodcpq25ljcL+ypPWBjbz71VMWQoTJQQ6Ul1AI4NUPBn10Xgv4nUIw/On5E1dKviMK1vEtjqCLqfUHQzeYTbOHr6V1yMfnXh01HL2lFF5Q7gWFrs3BevnfkBfUnhNtjN3nVM9J0qoRcZW1/AX/AmajDaEhtHJ8VxlNx8oH2V5DgPUyCuhQtdmsW4E8lB+Vegvx5n6AZKykHjw/PCVA8+XTn5wH50/PnM7ZOzHxDlE8KgXqO3wIupzOTpwBsvPXlchsjY7Yh2sQlNBepUe2RFAvx+1bl6k6Snb+3kZP0bCgphVN2PB67c3fnluBZT0F+AChVt/baZDhMJdcPfxvwfENwJY8cnlz8l0MZYyozwCVBKOchBxchB6uQo/nPpylTCgKOAAA9tJ89bp4XvMdhU61Ub1FP9YfwQz6JkUiJrNubXp4Wg9eqbKg4DiSdFVRzJOggX9obQp0EapWdaaLxZjYD+58hOSbydq9RyyYNe7Th3rgM581Q+Ff3rnyE0OIr4vbFWpWqv3WGoBmduNOggBJVRpnqlefE+QsJotjbJFZcRUIZcPh6bVHNxmYm4pU81rZna1yBoAfKBbxONqYhzUr1XewJzOxawPGwOgB+ytgZh4rFE3Vbj9kcT5uf+IljE1SAqDidTbrwH0F5XcU1Fvjb83hBKSoPHqTyHPylaVHbRBlHkNf7Swmqtf475geZHzL/AFtKWxTcF09OfpAzqvd0hr4qh4Le9vNm5egmATe7sbseHn6dAJj36zLo0wBnf2H9IFtKZ05sfzaXKpCtlHC3E3sWF81v5e0uKSNT8THQDj6ATfnc/EPhhiAugNrWJFrcB6deZJhUaZhb1ufyOf8AiTrs13uTBsKbUCwruq51fxAsQL5MviAuOd9JEqGw6mbxLryGp/pOgbnbgVarLUqL3agg5iLMbclHLlA7cBPZbp08qgDkAPpLkDQb6Y00sHVKkhny01I4g1WWnmH3Qxb92cb2TvimHrVkCDuy4VSBY5KYyIPTRmt+2Z0ntarFcHTtzrp+CVG/4z54XgPSB25XwmOT5ST6BhIntzs+ZbvQNx05yCYbFPTIKMQR0Mmuwu0B0stYZh15yiN08TicK/zKQeB4H1B0kt2dvTg8SAmNpZG0HeJ+FxxFuPMX1tJSlXCY5NcpJ9iJFdudnrC7UDf9nn7QM/E7qvlNXB1UxFEAk3YI4AFzZz4ToPmKzD2BspsTdy3d0EGarVbQKNCQL6ZrH258QDptz8Ozu+Hapkoub4hw1vBTuSgvpZmBJPPKOQIbZbzbf7/LRor3eFpH9WnAuQf9Sp1JOoB4XufEdIPd4dvLVUYfDqaeFQ3CahqjD56l9TrqFPqdbBdAYvPJUeGe3ntogS3suw+faKG3+nTqP+C0v+Zncpyfsbw16uJqW0VEQH77OzD/AGpOsSK8InGe2vaDNXoYZbkIofLyZ6jMie4Ct/HOzzj3a1hDTxKYoC4T9HY+lOpUzfS6fxQNnvns5cFsdMHS4uyK55sRepUY/eKH2NpzrD7QVdmLh1+LEYjPUPPKhsi+gKKfcyT71730qmIpIzBqecE21srhkJPs15z+ngXWs+HPFc2TzI1FvXiIGG9Mio1+K6fTSY1erdyZJWppiVDppWClaifaZFLLUH3lBv5iReopuTYm59oR4ahJ0lSsRxGhnlMm+gv5ATJyAav/AA8/8Qqmhh1+Ik5R1lQfO1z8KymozOQALDp09ZsdkbMbEVFooCRcZiOflIiXdm+6v6W5qOLIvDzHQev8rTu2Hw6ogRQAoFgOU1m7OxlwtBKajUC7HqZupVY/6FTvfIl+uUTIAnsQEREDnXbRUthKA61/5Ua84Mo0HpO49t5/6bDj/wArWHU904AHuZxKshp+Fh4rDQ8r9YFDoRxlFoRydTK7SivDYp0OZGII6Sdbs70YjEE4YtZnVgH+ZV0zlf28ma1+YkByzabBxXdGtUFwy02CkfaOo/FR+MDZ4yqoeqlOwQOUFuYQ249LjS3KYplGGSyKPIfjrLkICLT2erAReDEDrvY/hsuFrOfnrG3oiov/ALZp0GRbs3w+TZ2H/bDP/G7MPwIkpkVbqvYXnD9+9+qVaqKNJDWQFlqPydWFmWmOYuFYN1QEaamQdsu8xpouDQ2NRc9YjjkvZU/eIN/Jbc5oNztzCyZ3FmYXduYv8i9Lc+p9IHO8fs/IfCc6ciP5EcjMijtFi1N20qUyMj8b5eAb+XnJ9tvcPUtSYr5cpG33LxV/hv5iBi46oEqpjcPoC2Zk45Hvd0PVDrb1mu2xSUsalLRH8QAv4SdSh9De0lOE3ExQViBxGqk3v7dZH8dsLEUyQUI8iDb+0o0hZ/2vz6StKJ4tp6zNTZNZjYLb6/yAkr2B2cYiuQWQhereFfpxMiIrgMG1ZglJTYmxa2p8lE7zuDuauEQO6jvCP4Qf6zY7sbn0cIAQAz2+Ijh5KOUk8K8AnsRAREQEpJtqZVNftfGGjRqVAjOUUtlUZibdF59bDXSBFt/tsrRTvEpLVr0VLKGIy0c91FWoCdWIDBVHiNmtzt8+Yqo7u1SoxZnJZmPFieJv/aSnbGKxLJ3ldbDFu75zmUvkWmrBVvlyDMFVit7FgDaaxFuLG1ultIGkpi0yMNh2dgqKWJvoBc6Akn0ABJPIAmSfdvc5sZUOVu7oprWqH4UW1yAx0L25cANTYWvu9uvhqSVEwlMU6KoUdzfvKxBv4mbUJmAOXTMQLiwACjm7VNSBwmTSH6qoeuUfj/mYAFjNhSH6r71QD8B/YwjaqLadIhjrPRKEqELPYHlpdweFeq6UkHjqMqL6sbX9BxPkDLYElnZzs56mLV1HhS5LdL6G3na49zA7PgcKtKmlNfhpqqr6KAB/KZM8nsivnjeYnE7ZqKdb4haYHlSULYeRKnTzM7tg8AqU0QDQAfXmZwPH3w22GLn4MYXYn7FR81z+44M+jIGtqYIHlLQ2cOk29otAwKeEA5S6+DRviVW9ReZQE9gYdPZtFTdaaA/dEywJ7EBERAREQEREBPCJ7EDkXbef1mC8lrn6mgJzZDOhdtlT/qMIvSnUP1ZB/wAZzpBKOiY7euiiYajQZadCkivVamFqA1CgaxU/EytqQ3FjrwkP2vtHv3ZiLISSEJz+hcn4nta58zNY48D+n/sbSu8kGJiNnA6qbHoeH14j8Z4KZVaSMNS5Y+1xaZ4Mx6ovUpjoGMqMq8QTECoSoCUibLYmyKmJqCmi3J4nkB1gVbC2NUxNQIg48TyAnc93th08LSFNBr8zcyZRu5sGnhKYRB4j8Tcyf7TdSKREQOOdtGwbPTxirdWAp1fvD/TY+oJW/kslPZlvV+l0O6qH9fRADX4unBanrybzF+Ykp23sxcTQqUXF1dSPfkZ8/MmI2di8yaVaLXseDpwII5qw0I9xqAYH0lEi+wN+MFihTVKyrVqD/SY2cHmmujH04jWSiAiIgIiICIiAiIgIiICIiBxntrw5Wvh6pvlemaYPIMjl7E8iQ+n3T0nPFPQz6N3n3fTGUjTfTmDa49xOK7x7g4nCksgLJ1Go/wAe8CO1PgPmyD6st5cJmI1a1lcZWzKTfymQD04eUqKxLAN63on8yJeDW/P5/IlijrUc9AogZRM9WUzYbH2W+IqLTRcxJ9gOpgXNjbKqYmotOmpJJ1PQdTO57s7v08JTCqLsfibmT/aU7r7u08JTCqLufibmfIeU30ikREBERASE9o27IxFBqyACtSBZTwzW4qSOo0k2lDKCCDqDxgfK9Qg+IeHVrKL5vDbxE6FTm4Gwte3Kdb7P+0HPlw2Ma1T4adU6B+QSp9mpyB+b14x7tJ3VbD1DWoj9XV8LW+W519L3Iv53kCdBbNbwPmy3vdgAL6cuNx94XMo+ronIuz7tCy5MNi3upstKsx1HIJVJ+gb69Z1yQexEQEREBERAREQEREBKGQEWIBB5HWVxAhO8vZ5hsSCVAR/9pP8AT2nJNvbm4nCMfCWTlzHsf7z6RlqtRVgVYAg8QReB8sJiRezDKw5HSeYU+Kof2gPoJ23ebs1oVwWpeB+nL2PKQCl2c4tKhQISCeOlvW8DTbK2c9eoqIpJY/n2nd9092kwdMAC9Rvjb+g8pZ3O3VTBpc2ao3xN08hJPAREQEREBERAREQMLamASvTek4BVhb/M+dd4tiPhMQ9BwLMLU3a/wEk3B4XF7a/aB1tPpeQ/tD3YGMw5Ki1VASh9tQfIjT3gcBvYnmpJOY/MORAOtzxtxsROh7hb/HD5cPiWLUDpTqHU0uQVjxNPhrxXzHw8+xNXTI4YMhK5ehB8V/O/9Oks0altDwPGVH1dTcMAQQQQCCDcEHUEHmJcnz9uxv5iMCvdKFxFHiqlipTqFcA2U/ZINuVp2Ddbemjj6ZandHW2em1sy34HQ2Kmxsw/AggRUhiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAlmtVVFLOwVQCSxIAAHEknQCXpybtk3iuBs9VN3C1Xa9hlDNZAttblbk3FrDjfQIHv7iqNXH13w5VqfhAZNVZsoLspHEZiRf9maNE6zJwOFLoxUjMhXMvMqxADjyBIBHn5GZiYdE1Ygnp7yoxaGFZuVhJLuzjlwdelVDHNmVWAOjU3Kiop9B4h+0iyPYnaPJdB+eMyd2NnPiMTRvogdGcniwVgSqjiSbWvw1gfTMTwGeyKREQEREBERAREQEREBERAREQEREBERAREQEoZgBc6ASuQHtawFSphlZWfu0YmoiE3YMAFYgHxBTdrWPpzAZW39+qVIMKA751tmYaotzlvYHM4vYEroLi5E5BvZt6pWqB6jI9QEHKFDFVUmwdgLAC5OVeFzcmNlYfFu5FJCneKyOLZmdXUqe8Pob68wDbSdA3a7LlVc1c2JHwjU/vHnIOV4jHXq02AtmUq9tMwa+bTrxMs5XqNZRe/0/PpOvv2UU7OBUGp8Iy6DpeSPd7cjD4YBiO8cfMw0HoJRzLdjs5rV7O4yJ1YfyXn7zrWwt18PhQMi5n5s2p/xN4BaVQEREBERAREQEREBERAREQEREBERAREQEREBERATHxmFWohVxcGIgWNnbIo0BamgXz5/WZ8RAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQP//Z"}}):Object(q.jsx)(q.Fragment,{})}),Object(q.jsxs)(l.default,{style:te.buttons,children:[!1===n.completed?Object(q.jsx)(A.default,{style:te.chat,title:"accept",onPress:function(){return ge(n.requestId)},children:Object(q.jsx)(x.default,{name:"text-box-check-outline",color:"#417F4C",size:30})}):Object(q.jsx)(q.Fragment,{}),n.userId!==t?Object(q.jsx)(A.default,{style:te.chat,title:"chat",onPress:function(){return he.navigate("Chat",{requestUserId:n.userId,currentUserId:t})},children:Object(q.jsx)(x.default,{name:"forum-outline",color:"#417F4C",size:30})}):void 0]})]})}})]})},te=d.default.create({container:{display:"flex",alignItems:"flex-end"},scrollContainer:{},filersContainer:{alignItems:"flex-end",display:"flex",flexDirection:"row",justifyContent:"space-around",marginLeft:90,zIndex:2e3},card:{margin:10,backgroundColor:T,padding:10,width:f.default.get("window").width-20,borderRadius:5},request:{alignContent:"flex-start",fontWeight:"500"},header:{flexDirection:"row",justifyContent:"space-between"},distance:{alignContent:"flex-end",fontWeight:"400"},description:{alignContent:"flex-start",fontWeight:"300",marginTop:5},imgContainer:{alignItems:"center"},img:{alignContent:"flex-end",marginTop:5,width:70,height:70},chat:{margin:5,height:31},buttons:{alignItems:"center",flexDirection:"row",justifyContent:"flex-end",padding:2,width:f.default.get("window").width-50,height:31,borderRadius:5}}),ne=n(6),re=n.n(ne);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){re()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=function(e){var t=e.user,n=Object(r.useState)([]),a=c()(n,2),i=a[0],s=a[1],o=Object(_.useNavigation)();return Object(r.useEffect)((function(){!function(){var e,n,r;O.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O.a.awrap(fetch(R.apiUrl+"/chats/"+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}));case 3:return e=a.sent,a.next=6,O.a.awrap(e.json());case 6:n=a.sent,console.log(n),r=n.body,s(r),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),alert(a.t0);case 15:case"end":return a.stop()}}),null,null,[[0,12]],Promise)}()}),[]),Object(q.jsx)(G.default,{style:oe.container,children:Object(q.jsx)(M.default,{data:i.map((function(e){return ie(ie({},e),{},{key:e.id})})),renderItem:function(e){var n=e.item,r=e.index;return Object(q.jsxs)(l.default,{style:oe.card,children:[Object(q.jsxs)(u.default,{style:oe.request,children:["Chat "+(r+1)," "]}),Object(q.jsxs)(u.default,{style:oe.message,children:["string"===typeof n.messages&&n.messages.length>4?JSON.parse(n.messages)[0].text:""," "]}),Object(q.jsx)(A.default,{style:oe.chat,title:"chat",onPress:function(){return o.navigate("Chat",{requestUserId:n.userId1===t?n.userId2:n.userId1,currentUserId:t})},children:Object(q.jsx)(l.default,{style:oe.buttons,children:Object(q.jsx)(x.default,{name:"forum-outline",color:"#417F4C",size:30})})})]})}})})},oe=d.default.create({container:{display:"flex",alignItems:"center"},scrollContainer:{},filersContainer:{flex:1,flexDirection:"row",justifyContent:"space-around",marginLeft:60,marginTop:40},card:{display:"flex",margin:10,backgroundColor:T,justifyContent:"center",padding:10,width:f.default.get("window").width-20,borderRadius:5},message:{display:"flex",margin:5,marginBottom:0,backgroundColor:T,justifyContent:"center",color:"grey"},request:{display:"flex",alignContent:"flex-start",fontWeight:"400"},description:{display:"flex",alignContent:"flex-start",fontWeight:"300"},chat:{margin:5,height:31},buttons:{alignItems:"center",flexDirection:"row",justifyContent:"flex-end",padding:2,width:f.default.get("window").width-50,height:31,borderRadius:5}}),ce=n(179),le=n(167),ue=function(e){var t=e.route.params,n=t.requestUserId,a=t.currentUserId,i=Object(r.useState)({}),s=c()(i,2),o=s[0],l=s[1],u=Object(r.useState)([]),d=c()(u,2),f=d[0],b=d[1],h=Object(r.useRef)(null);n||alert("requestUserId not defined"),a||alert("currentUserId not defined");Object(r.useEffect)((function(){return h.current=new WebSocket(R.webSocketUrl+"?userId1="+n+"&userId2="+a),h.current.onopen=function(){console.log("connection establish open")},h.current.onclose=function(){return console.log("connection establish closed"),h.current=new WebSocket(R.webSocketUrl+"?userId1="+n+"&userId2="+a)},function(){h.current.close()}}),[]),Object(r.useEffect)((function(){h.current.onmessage=function(e){var t=JSON.parse(e.data);t.user._id!==a&&b((function(e){return ce.GiftedChat.append(e,t)}))}}),[]),Object(r.useEffect)((function(){(function(){var e,t;return O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("requestUserId",n),r.prev=1,r.next=4,O.a.awrap(fetch(R.apiUrl+"/users/"+n,{method:"GET",headers:{"Content-Type":"application/json"}}));case 4:return e=r.sent,r.next=7,O.a.awrap(e.json());case 7:t=r.sent,200===e.status?(l(t.body),console.log(o)):alert(e.error),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),alert(r.t0.message);case 14:case"end":return r.stop()}}),null,null,[[1,11]],Promise)})().then((function(){(function(){var e,t;return O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O.a.awrap(fetch(R.apiUrl+"/chat/"+n+"/"+a+"/"+o.firstName,{method:"GET",headers:{"Content-Type":"application/json"}}));case 3:return e=r.sent,r.next=6,O.a.awrap(e.json());case 6:return t=r.sent,r.abrupt("return",t);case 10:r.prev=10,r.t0=r.catch(0),alert(r.t0.message);case 13:case"end":return r.stop()}}),null,null,[[0,10]],Promise)})().then((function(e){try{var t=JSON.parse(e.body.messages).map((function(e){return{_id:e.id||Object(le.v4)(),text:e.text,createdAt:e.timestamp,user:{_id:e.userId,name:"msg.userName"}}})).sort((function(e,t){return t.createdAt<e.createdAt?-1:1}));b(t)}catch(n){console.error(n)}}))}))}),[]);var p=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];h.current.send(JSON.stringify({action:"sendMessage",message:e[0],senderId:a,receiverId:n})),b((function(t){return ce.GiftedChat.append(t,e)}))}),[]);return Object(q.jsx)(ce.GiftedChat,{wrapInSafeArea:!0,messages:f,onSend:function(e){return p(e)},user:{_id:a},showAvatarForEveryMessage:!0,renderAvatar:null})};h.object().shape({email:h.string().label("Email").email("Enter a valid email").required("Please enter a registered email"),password:h.string().label("Password").required().min(6,"Password must have at least 6 characters ")});d.default.create({errorContainer:{marginVertical:5},errorText:{color:"red"},container:{flex:1,alignItems:"center",marginTop:40},input:{marginVertical:10,width:f.default.get("window").width-100,height:40,borderWidth:1,padding:10,borderRadius:5},buttonContainer:{marginVertical:10,justifyContent:"center",alignItems:"center",padding:10,width:f.default.get("window").width-200,height:44,borderRadius:5,backgroundColor:"#343434"},buttonText:{fontSize:18,color:"#ffffff"}});s.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)((function(){Object(r.createContext)(void 0);var e=Object(r.useState)(""),t=c()(e,2),n=t[0],a=t[1],i=Object(r.useState)(!0),s=c()(i,2),o=s[0],u=s[1],d=Object(j.default)(),f=Object(g.default)();function b(){return Object(q.jsx)(l.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:Object(q.jsx)(ee,{user:n})})}function h(){return Object(q.jsx)(l.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:Object(q.jsx)(se,{user:n})})}return o?Object(q.jsx)(k,{setUser:a,user:n,setIsNotSignedIn:u}):Object(q.jsx)(p.default,{children:Object(q.jsxs)(d.Navigator,{initialRouteName:"Feed",labeled:"false",activeColor:"#F3E8EE",inactiveColor:T,barStyle:{backgroundColor:B},children:[Object(q.jsx)(d.Screen,{name:"Feed",component:function(){return Object(q.jsxs)(f.Navigator,{screenOptions:{headerShown:!1},initialRouteName:"FeedNav",children:[Object(q.jsx)(f.Screen,{name:"FeedNav",component:b}),Object(q.jsx)(f.Screen,{name:"Chat",component:ue})]})},options:{title:"The Feed",tabBarLabel:"Feed",tabBarIcon:function(e){var t=e.color;return Object(q.jsx)(x.default,{name:"rss-box",color:t,size:26})}}}),Object(q.jsx)(d.Screen,{name:"Help",component:function(){return Object(q.jsx)(l.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:Object(q.jsx)(V,{user:n})})},options:{title:"Get/Give Help",tabBarLabel:"Get/Give Help",tabBarIcon:function(e){var t=e.color;return Object(q.jsx)(x.default,{name:"help-circle",color:t,size:26})}}}),Object(q.jsx)(d.Screen,{name:"Chat List",component:function(){return Object(q.jsxs)(f.Navigator,{screenOptions:{headerShown:!1},children:[Object(q.jsx)(f.Screen,{name:"Chats",component:h}),Object(q.jsx)(f.Screen,{name:"Chat",component:ue})]})},options:{title:"User Chats",tabBarLabel:"Chat list",tabBarIcon:function(e){var t=e.color;return Object(q.jsx)(x.default,{name:"forum",color:t,size:26})}}}),Object(q.jsx)(d.Screen,{name:"Profile",component:function(){return Object(q.jsx)(l.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:Object(q.jsx)(Z,{user:n})})},options:{title:"Profile",tabBarLabel:"Profile",tabBarIcon:function(e){var t=e.color;return Object(q.jsx)(x.default,{name:"account-box",color:t,size:26})}}})]})})}),{})}),document.getElementById("root"))}},[[317,1,2]]]);
//# sourceMappingURL=app.18ad1789.chunk.js.map